---
layout: post
title: robotiq｜解决robotiq夹爪偶发关闭失败的问题
categories: [笔记，robotiq]
description: 笔记
keywords: issue
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---
### 遇到问题描述 ###

在进行布料展开实验过程中，robotiq夹爪偶发程序里提示关闭成功，但实际上夹爪没有响应。

### 故障原因 ###

开启指尖差速器节点就会导致夹爪关闭失败，具体原因未知，目前重点是完成实验，以后有时间再来深究。

### 解决办法 ###

更换robotiq夹爪在电脑上的usb接口

### 思路历程 ###
遇到这个问题我首先排查了代码，没有发现运行逻辑问题，偶尔重启电脑夹爪能正常关闭，但是没过多久还是会出现无法关闭的情况。一时间百思不得其解，由于实机做实验较为麻烦，为了节省时间成本，我在仿真环境里模拟实验场景，结果夹爪又能正常关闭了！于是我又实机做实验，结果夹爪还是无法关闭。。。

仔细对比仿真和实机场景，我发现了问题所在：在仿真环境里我没有打开**相机寻找织物角点**、**二指六自由度夹爪**和**指尖差速器**节点，夹爪能正常关闭，实机实验我打开了以上三个节点，夹爪就不能关闭，问题会不会是出现在这三个节点上呢？很有可能！于是我首先排查了这三个节点的代码，没有发现任何问题，那就是开关这几个节点的问题了。接下来我一个一个节点的试了一下，发现只有在不开启差速器节点的时候，夹爪才能正常关闭，一旦开启了指尖差速器节点，那无论是在仿真环境还是实机实验，夹爪都无法关闭，问题找到了，那怎么解决呢？

首先排除串口号冲突的问题，目前二指六自由度夹爪、指尖差速器和robotiq夹爪的串口号分别为
```sh
/dev/ttyUSB0
/dev/ttyUSB1
/dev/ttyUSB2
```

于是我想到会不会是串口带宽的问题，因为现在robotiq是接在usb拓展坞上的，这个拓展坞上面还接了许多其他的设备，于是我把robotiq夹爪的usb线直接插到电脑机箱背部接口，此时串口号变成了：
```sh
/dev/ttyUSB0
/dev/ttyUSB1
/dev/ttyUSB3
```

修改一下代码中的串口号，重新编译运行，此时无论在仿真环境还是实机实验，无论开不开指尖差速器节点，robotiq都能正常关闭了！但是具体是不是因为带宽问题尚不清楚，以后有时间再来深究吧。